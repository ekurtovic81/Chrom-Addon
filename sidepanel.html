<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Export/Import History & Bookmarks v4.0</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body class="side-panel-body">
  <div class="side-panel-container">
    <header class="header">
      <div class="header-icon">
        <svg width="32" height="32" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M12 2L2 7L12 12L22 7L12 2Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          <path d="M2 17L12 22L22 17" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          <path d="M2 12L12 17L22 12" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
      </div>
      <h1 class="title">Export/Import<br>History & Bookmarks</h1>
      <div class="version-badge">v4.0</div>
    </header>

    <div class="tabs">
      <button class="tab-btn active" data-tab="export">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor">
          <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
          <polyline points="7 10 12 15 17 10"/>
          <line x1="12" y1="15" x2="12" y2="3"/>
        </svg>
        Export
      </button>
      <button class="tab-btn" data-tab="import">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor">
          <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
          <polyline points="17 8 12 3 7 8"/>
          <line x1="12" y1="3" x2="12" y2="15"/>
        </svg>
        Import
      </button>
      <button class="tab-btn" data-tab="auto">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor">
          <circle cx="12" cy="12" r="10"/>
          <polyline points="12 6 12 12 16 14"/>
        </svg>
        Auto-Backup
      </button>
      <button class="tab-btn" data-tab="cloud">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor">
          <path d="M18 10h-1.26A8 8 0 1 0 9 20h9a5 5 0 0 0 0-10z"/>
        </svg>
        Cloud
      </button>
    </div>

    <!-- Export Tab -->
    <div id="export-tab" class="tab-content active">
      <div class="section">
        <label class="label">What to export:</label>
        <div class="checkbox-group">
          <label class="checkbox-label">
            <input type="checkbox" id="export-history" checked>
            <span class="checkbox-custom"></span>
            <span>Browser History</span>
          </label>
          <label class="checkbox-label">
            <input type="checkbox" id="export-bookmarks" checked>
            <span class="checkbox-custom"></span>
            <span>Bookmarks</span>
          </label>
        </div>
      </div>

      <div class="section">
        <label class="label" for="time-period">Time Period:</label>
        <select id="time-period" class="select">
          <option value="today">Today</option>
          <option value="yesterday">Yesterday</option>
          <option value="7days" selected>Last 7 Days</option>
          <option value="30days">Last 30 Days</option>
          <option value="90days">Last 90 Days</option>
          <option value="all">All Time</option>
          <option value="custom">Custom Period</option>
        </select>
      </div>

      <div id="custom-dates" class="section custom-dates" style="display: none;">
        <div class="date-inputs">
          <div class="date-input-group">
            <label class="label-small">From:</label>
            <input type="date" id="start-date" class="date-input">
          </div>
          <div class="date-input-group">
            <label class="label-small">To:</label>
            <input type="date" id="end-date" class="date-input">
          </div>
        </div>
      </div>

      <div class="section">
        <label class="label" for="export-format">Export Format:</label>
        <select id="export-format" class="select">
          <option value="json">JSON (Best for re-importing)</option>
          <option value="html">HTML (Readable in browser)</option>
          <option value="csv">CSV (Spreadsheet compatible)</option>
        </select>
      </div>

      <div class="section">
        <label class="label" for="export-folder">Save to Folder:</label>
        <div class="folder-selector">
          <input type="text" id="export-folder-path" class="folder-input" 
                 placeholder="Choose backup folder..." readonly>
          <button id="choose-folder-btn" class="btn-folder">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor">
              <path d="M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"/>
            </svg>
            Browse
          </button>
        </div>
        <p class="help-text">Select folder for automatic backups</p>
      </div>

      <button id="export-btn" class="btn btn-primary">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor">
          <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
          <polyline points="7 10 12 15 17 10"/>
          <line x1="12" y1="15" x2="12" y2="3"/>
        </svg>
        Export & Save to Folder
      </button>
    </div>

    <!-- Import Tab -->
    <div id="import-tab" class="tab-content">
      <div class="section">
        <label class="label">Import From:</label>
        <div class="radio-group">
          <label class="radio-label">
            <input type="radio" name="import-source" value="local-file" checked>
            <span class="radio-custom"></span>
            <span>Local File</span>
          </label>
          <label class="radio-label">
            <input type="radio" name="import-source" value="backup-folder">
            <span class="radio-custom"></span>
            <span>From Backup Folder</span>
          </label>
        </div>
      </div>

      <!-- Local File Import -->
      <div id="local-file-section" class="import-section">
        <div class="section">
          <label class="label">Import Options:</label>
          <div class="radio-group">
            <label class="radio-label">
              <input type="radio" name="import-mode" value="merge" checked>
              <span class="radio-custom"></span>
              <span>Merge (skip duplicates, update if newer)</span>
            </label>
            <label class="radio-label">
              <input type="radio" name="import-mode" value="replace">
              <span class="radio-custom"></span>
              <span>Replace existing data</span>
            </label>
          </div>
        </div>

        <div class="file-upload-area" id="file-upload-area">
          <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor">
            <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
            <polyline points="17 8 12 3 7 8"/>
            <line x1="12" y1="3" x2="12" y2="15"/>
          </svg>
          <p class="upload-text">Click to select file or drag & drop</p>
          <p class="upload-hint">Supports JSON, HTML, CSV files</p>
          <input type="file" id="import-file" accept=".json,.html,.csv" hidden>
        </div>

        <button id="import-file-btn" class="btn btn-primary" disabled>
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor">
            <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
            <polyline points="17 8 12 3 7 8"/>
            <line x1="12" y1="3" x2="12" y2="15"/>
          </svg>
          Import from File
        </button>
      </div>

      <!-- Backup Folder Import -->
      <div id="backup-folder-section" class="import-section" style="display: none;">
        <div class="section">
          <label class="label">Select Backup File:</label>
          <div id="backup-files-list" class="backup-files-list">
            <p class="placeholder-text">No backup folder selected</p>
          </div>
        </div>

        <div class="section">
          <label class="label">Import Mode:</label>
          <div class="radio-group">
            <label class="radio-label">
              <input type="radio" name="folder-import-mode" value="merge" checked>
              <span class="radio-custom"></span>
              <span>Merge with existing data</span>
            </label>
            <label class="radio-label">
              <input type="radio" name="folder-import-mode" value="replace">
              <span class="radio-custom"></span>
              <span>Replace existing data</span>
            </label>
          </div>
        </div>

        <button id="import-folder-btn" class="btn btn-primary" disabled>
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor">
            <path d="M3 15v4c0 1.1.9 2 2 2h14a2 2 0 0 0 2-2v-4M17 9l-5-5-5 5M12 4.2V15"/>
          </svg>
          Import Selected Backup
        </button>
      </div>
    </div>

    <!-- Auto-Backup Tab -->
    <div id="auto-tab" class="tab-content">
      <div class="section">
        <label class="label">Automatic Backup:</label>
        <p class="help-text">Schedule automatic backups to local folder</p>
      </div>

      <div class="section">
        <label class="label" for="auto-backup-folder">Backup Folder:</label>
        <div class="folder-selector">
          <input type="text" id="auto-backup-folder-path" class="folder-input" 
                 placeholder="Choose backup folder..." readonly>
          <button id="choose-auto-folder-btn" class="btn-folder">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor">
              <path d="M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"/>
            </svg>
            Browse
          </button>
        </div>
      </div>

      <div class="section">
        <label class="label" for="auto-backup-frequency">Backup Frequency:</label>
        <select id="auto-backup-frequency" class="select">
          <option value="disabled">Disabled</option>
          <option value="hourly">Hourly</option>
          <option value="daily" selected>Daily</option>
          <option value="weekly">Weekly</option>
          <option value="monthly">Monthly</option>
        </select>
      </div>

      <div class="section">
        <label class="label">Backup Content:</label>
        <div class="checkbox-group">
          <label class="checkbox-label">
            <input type="checkbox" id="auto-backup-history" checked>
            <span class="checkbox-custom"></span>
            <span>Browser History</span>
          </label>
          <label class="checkbox-label">
            <input type="checkbox" id="auto-backup-bookmarks" checked>
            <span class="checkbox-custom"></span>
            <span>Bookmarks</span>
          </label>
        </div>
      </div>

      <div class="section">
        <label class="label" for="max-backups">Keep Last:</label>
        <select id="max-backups" class="select">
          <option value="5">5 Backups</option>
          <option value="10" selected>10 Backups</option>
          <option value="20">20 Backups</option>
          <option value="50">50 Backups</option>
          <option value="unlimited">Unlimited</option>
        </select>
        <p class="help-text">Old backups will be automatically deleted</p>
      </div>

      <div class="auto-backup-info" id="auto-backup-info">
        <div class="info-card">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor">
            <circle cx="12" cy="12" r="10"/>
            <path d="M12 6v6l4 2"/>
          </svg>
          <div class="info-content">
            <div class="info-label">Next Backup:</div>
            <div class="info-value" id="next-backup-time">Not scheduled</div>
          </div>
        </div>
        <div class="info-card">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor">
            <polyline points="22 12 18 12 15 21 9 3 6 12 2 12"/>
          </svg>
          <div class="info-content">
            <div class="info-label">Last Backup:</div>
            <div class="info-value" id="last-backup-time">Never</div>
          </div>
        </div>
        <div class="info-card">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor">
            <path d="M22 12h-4l-3 9L9 3l-3 9H2"/>
          </svg>
          <div class="info-content">
            <div class="info-label">Backups Count:</div>
            <div class="info-value" id="backups-count">0</div>
          </div>
        </div>
      </div>

      <button id="save-auto-backup-btn" class="btn btn-primary">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor">
          <path d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"/>
          <polyline points="17 21 17 13 7 13 7 21"/>
          <polyline points="7 3 7 8 15 8"/>
        </svg>
        Save Auto-Backup Settings
      </button>

      <button id="run-backup-now-btn" class="btn btn-secondary">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor">
          <polyline points="23 4 23 10 17 10"/>
          <path d="M20.49 15a9 9 0 1 1-2.12-9.36L23 10"/>
        </svg>
        Backup Now
      </button>
    </div>

    <!-- Cloud Tab (Coming Soon) -->
    <div id="cloud-tab" class="tab-content">
      <div class="coming-soon-section">
        <div class="coming-soon-icon">
          <svg width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor">
            <path d="M18 10h-1.26A8 8 0 1 0 9 20h9a5 5 0 0 0 0-10z"/>
          </svg>
        </div>
        <h2 class="coming-soon-title">Cloud Sync Coming Soon!</h2>
        <p class="coming-soon-text">
          We're working on cloud storage integration with Google Drive, Dropbox, and OneDrive.
          In the meantime, enjoy our enhanced local backup features!
        </p>
        <div class="coming-soon-features">
          <div class="feature-item">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor">
              <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/>
              <polyline points="22 4 12 14.01 9 11.01"/>
            </svg>
            <span>Automatic local backups</span>
          </div>
          <div class="feature-item">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor">
              <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/>
              <polyline points="22 4 12 14.01 9 11.01"/>
            </svg>
            <span>Schedule backups (hourly/daily/weekly/monthly)</span>
          </div>
          <div class="feature-item">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor">
              <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/>
              <polyline points="22 4 12 14.01 9 11.01"/>
            </svg>
            <span>Automatic cleanup of old backups</span>
          </div>
          <div class="feature-item">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor">
              <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/>
              <polyline points="22 4 12 14.01 9 11.01"/>
            </svg>
            <span>Import directly from backup folder</span>
          </div>
        </div>
        <div class="version-notice">
          <strong>Version 4.0</strong> - Enhanced local backup system
        </div>
      </div>
    </div>

    <!-- Progress Section -->
    <div id="progress-section" class="progress-section" style="display: none;">
      <div class="progress-bar">
        <div id="progress-fill" class="progress-fill"></div>
      </div>
      <p id="progress-text" class="progress-text">Processing...</p>
    </div>

    <!-- Statistics Section -->
    <div id="stats-section" class="stats-section" style="display: none;">
      <div class="stats-card">
        <div class="stat-item">
          <div class="stat-icon history-icon">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor">
              <circle cx="12" cy="12" r="10"/>
              <polyline points="12 6 12 12 16 14"/>
            </svg>
          </div>
          <div class="stat-content">
            <div class="stat-value" id="stat-history">0</div>
            <div class="stat-label">History Items</div>
          </div>
        </div>
        <div class="stat-item">
          <div class="stat-icon bookmark-icon">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor">
              <path d="M19 21l-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z"/>
            </svg>
          </div>
          <div class="stat-content">
            <div class="stat-value" id="stat-bookmarks">0</div>
            <div class="stat-label">Bookmarks</div>
          </div>
        </div>
      </div>
      <div class="stats-detail" id="stats-detail"></div>
    </div>

    <!-- Footer -->
    <footer class="footer">
      <div class="footer-info">
        <div class="backup-status" id="backup-status">
          <span id="backup-status-text">Backup folder not selected</span>
        </div>
        <a href="https://buymeacoffee.com/ekurtovic81" target="_blank" class="coffee-link">
          <img src="https://cdn.buymeacoffee.com/buttons/v2/default-yellow.png" alt="Buy Me A Coffee" class="coffee-img">
        </a>
      </div>
    </footer>
  </div>

  <script src="sidepanel.js"></script>
</body>
</html>