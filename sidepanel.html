<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Export/Import History & Bookmarks</title>
  <link rel="stylesheet" href="styles.css">
  <script src="cloudAuth.js"></script>
</head>
<body class="side-panel-body">
  <div class="side-panel-container">
    <header class="header">
      <div class="header-icon">
        <svg width="32" height="32" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M12 2L2 7L12 12L22 7L12 2Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          <path d="M2 17L12 22L22 17" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          <path d="M2 12L12 17L22 12" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
      </div>
      <h1 class="title">Export/Import<br>History & Bookmarks</h1>
    </header>

    <div class="tabs">
      <button class="tab-btn active" data-tab="export">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor">
          <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
          <polyline points="7 10 12 15 17 10"/>
          <line x1="12" y1="15" x2="12" y2="3"/>
        </svg>
        Export
      </button>
      <button class="tab-btn" data-tab="import">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor">
          <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
          <polyline points="17 8 12 3 7 8"/>
          <line x1="12" y1="3" x2="12" y2="15"/>
        </svg>
        Import
      </button>
      <button class="tab-btn" data-tab="cloud">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor">
          <path d="M18 10h-1.26A8 8 0 1 0 9 20h9a5 5 0 0 0 0-10z"/>
        </svg>
        Cloud
      </button>
      <button class="tab-btn" data-tab="auto">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor">
          <circle cx="12" cy="12" r="10"/>
          <polyline points="12 6 12 12 16 14"/>
        </svg>
        Auto
      </button>
    </div>

    <!-- Export Tab -->
    <div id="export-tab" class="tab-content active">
      <div class="section">
        <label class="label">What to export:</label>
        <div class="checkbox-group">
          <label class="checkbox-label">
            <input type="checkbox" id="export-history" checked>
            <span class="checkbox-custom"></span>
            <span>Browser History</span>
          </label>
          <label class="checkbox-label">
            <input type="checkbox" id="export-bookmarks" checked>
            <span class="checkbox-custom"></span>
            <span>Bookmarks</span>
          </label>
        </div>
      </div>

      <div class="section">
        <label class="label" for="time-period">Time Period:</label>
        <select id="time-period" class="select">
          <option value="today">Today</option>
          <option value="yesterday">Yesterday</option>
          <option value="7days" selected>Last 7 Days</option>
          <option value="30days">Last 30 Days</option>
          <option value="90days">Last 90 Days</option>
          <option value="all">All Time</option>
          <option value="custom">Custom Period</option>
        </select>
      </div>

      <div id="custom-dates" class="section custom-dates" style="display: none;">
        <div class="date-inputs">
          <div class="date-input-group">
            <label class="label-small">From:</label>
            <input type="date" id="start-date" class="date-input">
          </div>
          <div class="date-input-group">
            <label class="label-small">To:</label>
            <input type="date" id="end-date" class="date-input">
          </div>
        </div>
      </div>

      <div class="section">
        <label class="label" for="export-format">Export Format:</label>
        <select id="export-format" class="select">
          <option value="json">JSON (Best for re-importing)</option>
          <option value="html">HTML (Readable in browser)</option>
          <option value="csv">CSV (Spreadsheet compatible)</option>
        </select>
      </div>

      <div class="section">
        <label class="label" for="export-destination">Destination:</label>
        <select id="export-destination" class="select">
          <option value="local">Local Download</option>
          <option value="cloud">Cloud Storage</option>
        </select>
      </div>

      <button id="export-btn" class="btn btn-primary">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor">
          <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
          <polyline points="7 10 12 15 17 10"/>
          <line x1="12" y1="15" x2="12" y2="3"/>
        </svg>
        Export Data
      </button>
    </div>

    <!-- Import Tab -->
    <div id="import-tab" class="tab-content">
      <div class="section">
        <label class="label">Import From:</label>
        <select id="import-source" class="select">
          <option value="local">Local File</option>
          <option value="cloud">Cloud Storage</option>
        </select>
      </div>

      <div id="local-import-section">
        <div class="section">
          <label class="label">Import Options:</label>
          <div class="radio-group">
            <label class="radio-label">
              <input type="radio" name="import-mode" value="merge" checked>
              <span class="radio-custom"></span>
              <span>Merge (skip duplicates, update if newer)</span>
            </label>
            <label class="radio-label">
              <input type="radio" name="import-mode" value="replace">
              <span class="radio-custom"></span>
              <span>Replace existing data</span>
            </label>
          </div>
        </div>

        <div class="file-upload-area" id="file-upload-area">
          <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor">
            <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
            <polyline points="17 8 12 3 7 8"/>
            <line x1="12" y1="3" x2="12" y2="15"/>
          </svg>
          <p class="upload-text">Click to select file or drag & drop</p>
          <p class="upload-hint">Supports JSON, HTML, CSV files</p>
          <input type="file" id="import-file" accept=".json,.html,.csv" hidden>
        </div>

        <button id="import-btn" class="btn btn-primary" disabled>
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor">
            <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
            <polyline points="17 8 12 3 7 8"/>
            <line x1="12" y1="3" x2="12" y2="15"/>
          </svg>
          Import Data
        </button>
      </div>

      <div id="cloud-import-section" style="display: none;">
        <div class="cloud-files-list" id="cloud-import-files">
          <p class="placeholder-text">Connect to cloud storage to see your files</p>
        </div>
        <button id="import-cloud-btn" class="btn btn-primary" disabled>
          Import Selected File
        </button>
      </div>
    </div>

    <!-- Cloud Storage Tab -->
    <div id="cloud-tab" class="tab-content">
      <div class="section">
        <label class="label">Cloud Storage Providers:</label>
        <p class="help-text">Connect your cloud storage to backup and sync your data</p>
      </div>

      <div class="cloud-providers">
        <div class="cloud-provider-card" data-provider="google-drive">
          <div class="provider-icon google-drive-icon">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
              <path d="M7.71 3.5L1.15 15l3.42 6.5L11.13 10l-3.42-6.5zm6.58 0L8.57 15l3.42 6.5 6.56-11.5-3.42-6.5zM6.29 21.5l3.42-6.5-6.84-.01 3.42 6.51z"/>
            </svg>
          </div>
          <div class="provider-info">
            <div class="provider-name">Google Drive</div>
            <div class="provider-status" data-status="disconnected">Not connected</div>
          </div>
          <button class="btn-connect" data-provider="google-drive">Connect</button>
        </div>

        <div class="cloud-provider-card" data-provider="dropbox">
          <div class="provider-icon dropbox-icon">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
              <path d="M6 1.8L0 5.5l6 3.7L12 5.5zM18 1.8l-6 3.7L18 9.2l6-3.7zM0 12.9l6 3.7 6-3.7-6-3.7zM18 12.9l-6 3.7 6 3.7 6-3.7zM6 18.2l6 3.8 6-3.8-6-3.7z"/>
            </svg>
          </div>
          <div class="provider-info">
            <div class="provider-name">Dropbox</div>
            <div class="provider-status" data-status="disconnected">Not connected</div>
          </div>
          <button class="btn-connect" data-provider="dropbox">Connect</button>
        </div>

        <div class="cloud-provider-card" data-provider="onedrive">
          <div class="provider-icon onedrive-icon">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
              <path d="M19.5 10.5c0-.3 0-.6-.1-.9-1.3-3.2-4.5-5.5-8.2-5.5-3.1 0-5.8 1.6-7.4 4-.6-.2-1.2-.3-1.8-.3C1.1 7.8 0 9 0 10.5c0 .8.3 1.5.8 2 .5.5 1.2.8 2 .8h15.7c1.7 0 3-1.3 3-3 0-1.5-1.1-2.7-2.6-2.9z"/>
            </svg>
          </div>
          <div class="provider-info">
            <div class="provider-name">OneDrive</div>
            <div class="provider-status" data-status="disconnected">Not connected</div>
          </div>
          <button class="btn-connect" data-provider="onedrive">Connect</button>
        </div>

        <div class="cloud-provider-card" data-provider="box">
          <div class="provider-icon box-icon">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
              <path d="M2 4v16h20V4H2zm18 14H4V6h16v12z"/>
              <path d="M8 10h8v2H8zm0 4h5v2H8z"/>
            </svg>
          </div>
          <div class="provider-info">
            <div class="provider-name">Box</div>
            <div class="provider-status" data-status="disconnected">Not connected</div>
          </div>
          <button class="btn-connect" data-provider="box">Connect</button>
        </div>

        <div class="cloud-provider-card" data-provider="pcloud">
          <div class="provider-icon pcloud-icon">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
              <path d="M18 10h-1.26A8 8 0 1 0 9 20h9a5 5 0 0 0 0-10z"/>
            </svg>
          </div>
          <div class="provider-info">
            <div class="provider-name">pCloud</div>
            <div class="provider-status" data-status="disconnected">Not connected</div>
          </div>
          <button class="btn-connect" data-provider="pcloud">Connect</button>
        </div>

        <div class="cloud-provider-card" data-provider="mega">
          <div class="provider-icon mega-icon">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
              <path d="M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5"/>
            </svg>
          </div>
          <div class="provider-info">
            <div class="provider-name">MEGA</div>
            <div class="provider-status" data-status="disconnected">Not connected</div>
          </div>
          <button class="btn-connect" data-provider="mega">Connect</button>
        </div>
      </div>
    </div>

    <!-- Auto-Backup Tab -->
    <div id="auto-tab" class="tab-content">
      <div class="section">
        <label class="label">Automatic Backup:</label>
        <p class="help-text">Schedule automatic backups to cloud storage</p>
      </div>

      <div class="section">
        <label class="label" for="auto-backup-frequency">Backup Frequency:</label>
        <select id="auto-backup-frequency" class="select">
          <option value="disabled">Disabled</option>
          <option value="daily">Daily</option>
          <option value="weekly">Weekly</option>
          <option value="monthly">Monthly</option>
        </select>
      </div>

      <div class="section">
        <label class="label" for="auto-backup-provider">Cloud Provider:</label>
        <select id="auto-backup-provider" class="select">
          <option value="">Select provider...</option>
          <option value="google-drive">Google Drive</option>
          <option value="dropbox">Dropbox</option>
          <option value="onedrive">OneDrive</option>
          <option value="box">Box</option>
          <option value="pcloud">pCloud</option>
          <option value="mega">MEGA</option>
        </select>
      </div>

      <div class="section">
        <label class="label">Backup Content:</label>
        <div class="checkbox-group">
          <label class="checkbox-label">
            <input type="checkbox" id="auto-backup-history" checked>
            <span class="checkbox-custom"></span>
            <span>Browser History</span>
          </label>
          <label class="checkbox-label">
            <input type="checkbox" id="auto-backup-bookmarks" checked>
            <span class="checkbox-custom"></span>
            <span>Bookmarks</span>
          </label>
        </div>
      </div>

      <div class="auto-backup-info" id="auto-backup-info" style="display: none;">
        <div class="info-card">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor">
            <circle cx="12" cy="12" r="10"/>
            <path d="M12 6v6l4 2"/>
          </svg>
          <div class="info-content">
            <div class="info-label">Next Backup:</div>
            <div class="info-value" id="next-backup-time">Not scheduled</div>
          </div>
        </div>
        <div class="info-card">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor">
            <polyline points="22 12 18 12 15 21 9 3 6 12 2 12"/>
          </svg>
          <div class="info-content">
            <div class="info-label">Last Backup:</div>
            <div class="info-value" id="last-backup-time">Never</div>
          </div>
        </div>
      </div>

      <button id="save-auto-backup-btn" class="btn btn-primary">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor">
          <path d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"/>
          <polyline points="17 21 17 13 7 13 7 21"/>
          <polyline points="7 3 7 8 15 8"/>
        </svg>
        Save Settings
      </button>

      <button id="run-backup-now-btn" class="btn btn-secondary">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor">
          <polyline points="23 4 23 10 17 10"/>
          <path d="M20.49 15a9 9 0 1 1-2.12-9.36L23 10"/>
        </svg>
        Backup Now
      </button>
    </div>

    <!-- Progress Section -->
    <div id="progress-section" class="progress-section" style="display: none;">
      <div class="progress-bar">
        <div id="progress-fill" class="progress-fill"></div>
      </div>
      <p id="progress-text" class="progress-text">Processing...</p>
    </div>

    <!-- Statistics Section -->
    <div id="stats-section" class="stats-section" style="display: none;">
      <div class="stats-card">
        <div class="stat-item">
          <div class="stat-icon history-icon">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor">
              <circle cx="12" cy="12" r="10"/>
              <polyline points="12 6 12 12 16 14"/>
            </svg>
          </div>
          <div class="stat-content">
            <div class="stat-value" id="stat-history">0</div>
            <div class="stat-label">History Items</div>
          </div>
        </div>
        <div class="stat-item">
          <div class="stat-icon bookmark-icon">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor">
              <path d="M19 21l-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z"/>
            </svg>
          </div>
          <div class="stat-content">
            <div class="stat-value" id="stat-bookmarks">0</div>
            <div class="stat-label">Bookmarks</div>
          </div>
        </div>
      </div>
      <div class="stats-detail" id="stats-detail"></div>
    </div>

    <!-- Footer -->
    <footer class="footer">
      <a href="https://buymeacoffee.com/ekurtovic81" target="_blank" class="coffee-link">
        <img src="https://cdn.buymeacoffee.com/buttons/v2/default-yellow.png" alt="Buy Me A Coffee" class="coffee-img">
      </a>
    </footer>
  </div>

  <script src="sidepanel.js"></script>
</body>
</html>
